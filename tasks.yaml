includes:
  - setup: ./tasks/setup.yaml
  - create: ./tasks/create.yaml
  - publish: ./tasks/publish.yaml

tasks:
  - name: create-k3d-cluster
    actions:
      - task: setup:create-k3d-cluster

  - name: create-pkg-flavor
    actions:
      - task: create:cert-manager-pkg-flavor
        variables:
          - name: FLAVOR

  - name: deploy-pkg-flavor
    actions:
      - task: deploy:cert-manager-pkg-flavor
        variables:
          - name: CERT_MANAGER_VALUES

  - name: remove-pkg-flavor
    actions:
      - task: remove:cert-manager-pkg-flavor

  - name: publish-pkg-flavor
    actions:
      - tasks: publish:cert-manager-pkg-flavor
        variables:
          - name: FLAVOR
